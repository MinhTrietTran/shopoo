<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="bi bi-shop"></i> Shopoo
            </a>
            <div class="navbar-nav ms-auto">
                <span class="navbar-text me-3">
                    Xin ch√†o, <%= user.name %>
                        <% if (user.tier==='diamond' ) { %>
                            <span class="badge bg-light text-primary ms-1">üíé Kim c∆∞∆°ng</span>
                            <% } else if (user.tier==='gold' ) { %>
                                <span class="badge bg-light text-warning ms-1">üèÖ V√†ng</span>
                                <% } else if (user.tier==='silver' ) { %>
                                    <span class="badge bg-light text-secondary ms-1">ü•à B·∫°c</span>
                                    <% } else { %>
                                        <span class="badge bg-light text-dark ms-1">üë§ Th∆∞·ªùng</span>
                                        <% } %>
                </span>
                <a href="/auth/logout" class="btn btn-outline-light btn-sm">
                    <i class="bi bi-box-arrow-right"></i> ƒêƒÉng xu·∫•t
                </a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Welcome Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card bg-primary text-white">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h2 class="mb-2">
                                    <i class="bi bi-person me-2"></i>Ch√†o m·ª´ng, <%= user.name %>!
                                </h2>
                                <p class="mb-0">
                                    <i class="bi bi-award me-2"></i>
                                    H·∫°ng th√†nh vi√™n:
                                    <% if (user.tier==='diamond' ) { %>
                                        <span class="badge bg-light text-primary">üíé Kim c∆∞∆°ng</span>
                                        <% } else if (user.tier==='gold' ) { %>
                                            <span class="badge bg-light text-warning">üèÖ V√†ng</span>
                                            <% } else if (user.tier==='silver' ) { %>
                                                <span class="badge bg-light text-secondary">ü•à B·∫°c</span>
                                                <% } else { %>
                                                    <span class="badge bg-light text-dark">üë§ Th∆∞·ªùng</span>
                                                    <% } %>
                                </p>
                            </div>
                            <div class="col-md-4 text-end">
                                <div class="h3 mb-0">
                                    <i class="bi bi-coin me-2"></i>
                                    <%= customer.totalSpent.toLocaleString() %>ƒë
                                </div>
                                <small>T·ªïng chi ti√™u</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Row -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-cart-check fs-1 text-success mb-2"></i>
                        <h4 class="card-title">0</h4>
                        <p class="card-text text-muted">ƒê∆°n h√†ng</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-currency-dollar fs-1 text-primary mb-2"></i>
                        <h4 class="card-title">
                            <%= customer.totalSpent.toLocaleString() %>ƒë
                        </h4>
                        <p class="card-text text-muted">T·ªïng chi ti√™u</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-percent fs-1 text-warning mb-2"></i>
                        <h4 class="card-title">
                            <% if (user.tier==='diamond' ) { %>15<% } else if (user.tier==='gold' ) { %>10<% } else if
                                        (user.tier==='silver' ) { %>5<% } else { %>0<% } %>%
                        </h4>
                        <p class="card-text text-muted">Gi·∫£m gi√°</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-truck fs-1 text-info mb-2"></i>
                        <h4 class="card-title">
                            <% if (user.tier==='diamond' || user.tier==='gold' ) { %>
                                <i class="bi bi-check-circle text-success"></i>
                                <% } else { %>
                                    <i class="bi bi-x-circle text-danger"></i>
                                    <% } %>
                        </h4>
                        <p class="card-text text-muted">Mi·ªÖn ph√≠ ship</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tier Progress -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="bi bi-bar-chart me-2"></i>Ti·∫øn ƒë·ªô h·∫°ng th√†nh vi√™n</h5>
                    </div>
                    <div class="card-body">
                        <% const tierThresholds={ none: { min: 0, max: 5000000, name: 'Th∆∞·ªùng' , color: 'secondary' },
                            silver: { min: 5000000, max: 15000000, name: 'B·∫°c' , color: 'secondary' }, gold: { min:
                            15000000, max: 50000000, name: 'V√†ng' , color: 'warning' }, diamond: { min: 50000000, max:
                            Infinity, name: 'Kim c∆∞∆°ng' , color: 'primary' } }; let currentTier=tierThresholds.none; let
                            progress=0; if (customer.totalSpent>= 50000000) {
                            currentTier = tierThresholds.diamond;
                            progress = 100;
                            } else if (customer.totalSpent >= 15000000) {
                            currentTier = tierThresholds.gold;
                            progress = ((customer.totalSpent - 15000000) / (50000000 - 15000000)) * 100;
                            } else if (customer.totalSpent >= 5000000) {
                            currentTier = tierThresholds.silver;
                            progress = ((customer.totalSpent - 5000000) / (15000000 - 5000000)) * 100;
                            } else {
                            currentTier = tierThresholds.none;
                            progress = (customer.totalSpent / 5000000) * 100;
                            }
                            %>

                            <div class="d-flex justify-content-between mb-1">
                                <span>H·∫°ng hi·ªán t·∫°i: <strong>
                                        <%= currentTier.name %>
                                    </strong></span>
                                <span>
                                    <%= progress.toFixed(1) %>%
                                </span>
                            </div>
                            <div class="progress mb-2" style="height: 10px;">
                                <div class="progress-bar bg-<%= currentTier.color %>" role="progressbar"
                                    data-width="<%= progress %>">
                                </div>
                            </div>

                            <style>
                                .progress-bar[data-width] {
                                    width: var(--progress-width);
                                }
                            </style>
                            <script>
                                document.querySelector('.progress-bar[data-width]').style.width =
                                    document.querySelector('.progress-bar[data-width]').getAttribute('data-width') + '%';
                            </script>

                            <% if (currentTier.max !==Infinity) { %>
                                <p class="text-muted small">
                                    Chi ti√™u th√™m <strong>
                                        <%= (currentTier.max - customer.totalSpent).toLocaleString() %>ƒë
                                    </strong>
                                    ƒë·ªÉ l√™n h·∫°ng ti·∫øp theo.
                                </p>
                                <% } else { %>
                                    <p class="text-muted small">
                                        üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ ƒë·∫°t h·∫°ng cao nh·∫•t.
                                    </p>
                                    <% } %>
                    </div>
                </div>
            </div>
        </div>

        <!-- Benefits -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="bi bi-gift me-2"></i>Quy·ªÅn l·ª£i c·ªßa b·∫°n</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="bi bi-check-circle text-success me-2"></i>
                                Gi·∫£m gi√°
                                <% if (user.tier==='diamond' ) { %>15<% } else if (user.tier==='gold' ) { %>10<% } else
                                            if (user.tier==='silver' ) { %>5<% } else { %>0<% } %>%
                                                    cho t·∫•t c·∫£ ƒë∆°n h√†ng
                            </li>
                            <% if (user.tier==='diamond' || user.tier==='gold' ) { %>
                                <li class="mb-2">
                                    <i class="bi bi-check-circle text-success me-2"></i>
                                    Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn to√†n qu·ªëc
                                </li>
                                <% } %>
                                    <% if (user.tier==='diamond' ) { %>
                                        <li class="mb-2">
                                            <i class="bi bi-check-circle text-success me-2"></i>
                                            H·ªó tr·ª£ kh√°ch h√†ng ∆∞u ti√™n 24/7
                                        </li>
                                        <li class="mb-2">
                                            <i class="bi bi-check-circle text-success me-2"></i>
                                            Truy c·∫≠p s·ªõm v√†o s·∫£n ph·∫©m m·ªõi
                                        </li>
                                        <% } %>
                                            <% if (user.tier==='gold' || user.tier==='diamond' ) { %>
                                                <li class="mb-2">
                                                    <i class="bi bi-check-circle text-success me-2"></i>
                                                    T√≠ch ƒëi·ªÉm th∆∞·ªüng g·∫•p ƒë√¥i
                                                </li>
                                                <% } %>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="bi bi-lightning me-2"></i>Thao t√°c nhanh</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <a href="/products" class="btn btn-primary">
                                <i class="bi bi-search me-2"></i>Kh√°m ph√° s·∫£n ph·∫©m
                            </a>
                            <a href="#" class="btn btn-outline-secondary">
                                <i class="bi bi-list-ul me-2"></i>Xem ƒë∆°n h√†ng
                            </a>
                            <a href="#" class="btn btn-outline-info">
                                <i class="bi bi-heart me-2"></i>S·∫£n ph·∫©m y√™u th√≠ch
                            </a>
                            <a href="#" class="btn btn-outline-warning">
                                <i class="bi bi-person-gear me-2"></i>C√†i ƒë·∫∑t t√†i kho·∫£n
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>